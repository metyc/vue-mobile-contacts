<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>vue 6demo</title>
        <script src="js/vue.js"></script>
    </head>
    <body>
        <div id="app">
            <div>{{count}}</div>
            <my-addbtn :count="count"></my-addbtn>
            <my-removebtn :count="count"></my-removebtn>
        </div>
        <!-- <script>
            var busVm = new Vue();

            var vm = new Vue({
                el: '#app',
                components: {
                    'my-header': {
                        template: '<h2>{{message}}</h2>',
                        data: function() {
                            return {
                                message: 'hello myHeader!!!'
                            };
                        },
                        mounted: function() {
                            busVm.$on(
                                'changeEvents',
                                function(str) {
                                    // console.log(str);
                                    this.message = str;
                                }.bind(this)
                            );
                        }
                    },
                    'my-list': {
                        template:
                            '<ul><li @click="getContent" v-for="item in list">{{item}}</li></ul>',
                        data: function() {
                            return {
                                list: ['第一項', '第二項', '第三項']
                            };
                        },
                        methods: {
                            getContent: function(ev) {
                                busVm.$emit(
                                    'changeEvents',
                                    ev.target.innerHTML
                                );
                            }
                        }
                    }
                }
            });
        </script> -->

        <script>
            var busVm = new Vue();

            var vm = new Vue({
                el: '#app',
                data: {
                    count: 0
                },
                mounted: function() {
                    busVm.$on(
                        'changeEvents',
                        function(num) {
                            this.count = num;
                        }.bind(this)
                    );
                },
                components: {
                    'my-addbtn': {
                        template: '<button @click=setCount>+</button>',
                        props: ['count'],
                        methods: {
                            setCount: function() {
                                busVm.$emit('changeEvents', this.count + 1);
                            }
                        }
                    },
                    'my-removebtn': {
                        template: '<button @click=setCount>-</button>',
                        props: ['count'],
                        methods: {
                            setCount: function() {
                                busVm.$emit('changeEvents', this.count - 1);
                            }
                        }
                    }
                }
            });
        </script>
    </body>
</html>

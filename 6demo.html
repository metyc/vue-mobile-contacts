<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>vue 6demo</title>
        <script src="js/vue.js"></script>
        <script src="js/vuex.js"></script>
    </head>
    <body>
        <!-- <div id="app">
            <div>{{count}}</div>
            <my-addbtn :count="count"></my-addbtn>
            <my-removebtn :count="count"></my-removebtn>
        </div>

        <script>
            var busVm = new Vue();

            var vm = new Vue({
                el: '#app',
                data: {
                    count: 0
                },
                mounted: function() {
                    busVm.$on(
                        'changeEvents',
                        function(num) {
                            this.count = num;
                        }.bind(this)
                    );
                },
                components: {
                    'my-addbtn': {
                        template: '<button @click=setCount>+</button>',
                        props: ['count'],
                        methods: {
                            setCount: function() {
                                busVm.$emit('changeEvents', this.count + 1);
                            }
                        }
                    },
                    'my-removebtn': {
                        template: '<button @click=setCount>-</button>',
                        props: ['count'],
                        methods: {
                            setCount: function() {
                                busVm.$emit('changeEvents', this.count - 1);
                            }
                        }
                    }
                }
            });
        </script> -->

        <div id="app">
            <div>{{count}}</div>
            <my-addbtn></my-addbtn>
            <my-removebtn></my-removebtn>
        </div>

        <script>
            var store = new Vuex.Store({
                state: {
                    count: 0
                },
                mutations: {
                    add: function(state) {
                        state.count++;
                    },
                    remove: function(state) {
                        state.count--;
                    }
                }
            });

            var vm = new Vue({
                el: '#app',
                computed: {
                    count: function() {
                        return store.state.count;
                    }
                },
                components: {
                    'my-addbtn': {
                        template: '<button @click=setCount>+</button>',
                        methods: {
                            setCount: function() {
                                store.commit('add');
                            }
                        }
                    },
                    'my-removebtn': {
                        template: '<button @click=setCount>-</button>',
                        methods: {
                            setCount: function() {
                                store.commit('remove');
                            }
                        }
                    }
                }
            });
        </script>
    </body>
</html>
